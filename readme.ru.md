# Telegram Bot: Управление контентом и модерация

Этот репозиторий содержит Telegram-бота, разработанного на Python, который упрощает процесс публикации пользовательского контента в Telegram-канале с возможностью модерации. Бот построен с использованием библиотеки `python-telegram-bot` и включает функции для публикации контента, управления интервалами между публикациями, блокировки/разблокировки пользователей и многое другое.

---

## Возможности

1. **Публикация пользовательского контента:**
   - Пользователи могут отправлять сообщения с текстом, фотографиями, видео или документами и описанием для публикации в указанном Telegram-канале.
   - Сообщения публикуются с кнопкой для читателей, позволяющей связаться с автором.

2. **Инструменты модерации:**
   - Администраторы могут:
     - Блокировать или разблокировать пользователей.
     - Отправлять ответы пользователям напрямую через бота.
     - Удалять сообщения из канала.
   - Команды доступны только администратору для обеспечения безопасности.

3. **Управление интервалами:**
   - Пользователи должны ждать настраиваемый промежуток времени между публикациями.
   - По умолчанию интервал составляет 72 часа, но администратор может его изменить.

4. **Статистика и режим обслуживания:**
   - Ведется подсчет общего количества пользователей и сообщений.
   - Администратор может включить или отключить режим обслуживания, чтобы приостановить взаимодействие с ботом.

5. **Проверка подписки на канал:**
   - Проверяет, подписан ли пользователь на указанный канал, перед тем как разрешить публикацию.

---

## Требования

- Python 3.7+
- Токен API Telegram-бота
- Переменные окружения для настройки

---

## Установка

1. **Клонирование репозитория:**

   ```bash
   git clone https://github.com/admise/Telegram-channel-publish-bot
   cd Telegram-channel-publish-bot
   ```

2. **Установка зависимостей:**

   ```bash
   pip install -r requirements.txt
   ```

3. **Настройка переменных окружения:**
   Создайте файл `.env` в корневой папке проекта и укажите следующие переменные:

   ```env
   TELEGRAM_API_TOKEN=ваш-токен-бота
   ADMIN_ID=ваш-id-администратора
   CHANNEL_ID=@id-вашего-канала
   CHANNEL_NAME=@имя-вашего-канала
   POST_INTERVAL=72  # Интервал между публикациями в часах
   ```

4. **Запуск бота:**

   ```bash
   python3 main.py
   ```

---

## Команды

### Команды для пользователей

- **Начать:** `/start`  
  Отображает приветственное сообщение с инструкциями.

### Команды для администратора

- **Установить интервал между публикациями:** `/set_interval <часы>`  
  Изменяет интервал между публикациями (только для администратора).

- **Проверить текущий интервал:** `/get_interval`  
  Отображает текущий интервал между публикациями.

- **Заблокировать пользователя:** `/ban <id_пользователя> <причина>`  
  Блокирует пользователя от взаимодействия с ботом.

- **Разблокировать пользователя:** `/unban <id_пользователя>`  
  Удаляет пользователя из списка заблокированных.

- **Список заблокированных пользователей:** `/banned_list`  
  Отображает список заблокированных пользователей.

- **Ответ пользователю:** `/reply <id_пользователя> <сообщение>`  
  Отправляет прямой ответ пользователю.

- **Включить/выключить режим обслуживания:** `/maintenance`  
  Переключает режим обслуживания.

- **Посмотреть статистику:** `/stats`  
  Отображает статистику использования бота.

---

## Структура файлов

```plaintext
.
├── main.py               # Основной скрипт с логикой бота
├── web_app_routes.py     # Интеграция с веб-приложением Flask (если используется)
├── requirements.txt      # Зависимости Python
├── .env                  # Переменные окружения (не включены в репозиторий)
```

---

## Логирование

Бот использует модуль Python `logging` для записи важных событий и ошибок. Логи выводятся в консоль по умолчанию и содержат детали, такие как взаимодействия с пользователями, ошибки и действия администратора.

---

## Развертывание

### Локальное развертывание

Запустите бота локально с помощью команды:

```bash
python3 main.py
```

### Развертывание на серверах

Вы можете развернуть бота на облачных сервисах, таких как AWS, Google Cloud или Heroku. Убедитесь, что файл `.env` правильно настроен, а зависимости установлены на сервере.

---

## Вклад в проект

1. Форкните репозиторий.
2. Создайте новую ветку для своей функции.
3. Зафиксируйте изменения и откройте pull request.

---

## Лицензия

Этот проект лицензирован под лицензией MIT. Подробности см. в файле `LICENSE`.

---

## Контакты

Если у вас есть вопросы или отзывы, свяжитесь с поддержкой по адресу sergei-700@mail.ru.

